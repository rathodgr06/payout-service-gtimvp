const a6_0x5a78a6=a6_0xe2aa;function a6_0xe2aa(_0x3dc492,_0x53da85){const _0x242727=a6_0x2427();return a6_0xe2aa=function(_0xe2aa8b,_0x18cf5c){_0xe2aa8b=_0xe2aa8b-0x9d;let _0x591fef=_0x242727[_0xe2aa8b];return _0x591fef;},a6_0xe2aa(_0x3dc492,_0x53da85);}(function(_0x5c89,_0x41d5e8){const _0x5d6c12=a6_0xe2aa,_0x13cc77=_0x5c89();while(!![]){try{const _0x4f8110=parseInt(_0x5d6c12(0xa1))/0x1+parseInt(_0x5d6c12(0xb0))/0x2*(-parseInt(_0x5d6c12(0xc4))/0x3)+-parseInt(_0x5d6c12(0xb5))/0x4*(parseInt(_0x5d6c12(0xcc))/0x5)+parseInt(_0x5d6c12(0xaa))/0x6*(parseInt(_0x5d6c12(0xcb))/0x7)+parseInt(_0x5d6c12(0xc5))/0x8*(parseInt(_0x5d6c12(0xb6))/0x9)+parseInt(_0x5d6c12(0xb7))/0xa+-parseInt(_0x5d6c12(0xab))/0xb;if(_0x4f8110===_0x41d5e8)break;else _0x13cc77['push'](_0x13cc77['shift']());}catch(_0xc96623){_0x13cc77['push'](_0x13cc77['shift']());}}}(a6_0x2427,0x58011));const httpStatus=require('http-status'),db=require(a6_0x5a78a6(0xa9)),bcrypt=require('bcrypt'),Payer=db[a6_0x5a78a6(0xc9)],Beneficiary=db[a6_0x5a78a6(0x9f)],Receiver=db[a6_0x5a78a6(0xcd)],addNewSenderReceiver=async _0x3ea2a8=>{const _0x50e3c9=a6_0x5a78a6;try{const [_0x57f691,_0x432f85]=await Beneficiary[_0x50e3c9(0x9d)]({'where':{'super_merchant_id':_0x3ea2a8?.[_0x50e3c9(0xcf)],'sub_merchant_id':_0x3ea2a8?.[_0x50e3c9(0xd0)],'iban':_0x3ea2a8?.[_0x50e3c9(0xa5)]},'defaults':{'super_merchant_id':_0x3ea2a8?.[_0x50e3c9(0xcf)],'sub_merchant_id':_0x3ea2a8?.[_0x50e3c9(0xd0)],'iban':_0x3ea2a8?.['iban'],'registered_name':_0x3ea2a8?.[_0x50e3c9(0xa2)],'country_iso_code':_0x3ea2a8?.[_0x50e3c9(0xc2)],'address':_0x3ea2a8?.[_0x50e3c9(0xb2)],'city':_0x3ea2a8?.[_0x50e3c9(0xb9)],'transaction_types':_0x3ea2a8?.['transaction_types'],'verification':_0x3ea2a8?.['verification']||_0x50e3c9(0xca),'active':_0x3ea2a8?.[_0x50e3c9(0xc1)]||0x1,'created_at':new Date(),'updated_at':new Date()}});if(_0x432f85)return{'status':httpStatus['OK'],'message':_0x50e3c9(0xb8),'data':_0x57f691[_0x50e3c9(0xac)]()};else return _0x57f691?{'status':httpStatus['CONFLICT'],'message':_0x50e3c9(0xba)}:{'status':httpStatus[_0x50e3c9(0xc0)],'message':'Beneficiary\x20not\x20created'};}catch(_0x3ea17c){return console['error'](_0x50e3c9(0xb1),_0x3ea17c),{'status':httpStatus['INTERNAL_SERVER_ERROR'],'message':'Error\x20finding\x20or\x20creating\x20beneficiary:'+_0x3ea17c['message']};}},getBeneficiaryById=async _0x22ac1f=>{const _0x228bf0=await Beneficiary['findOne']({'where':{'id':_0x22ac1f}});return _0x228bf0?_0x228bf0['toJSON']():null;},update_receiver=async _0x5c6dc0=>{const _0x5a6d9d=a6_0x5a78a6;try{const [_0x656e46]=await Beneficiary[_0x5a6d9d(0xc6)](_0x5c6dc0,{'where':{'id':_0x5c6dc0?.[_0x5a6d9d(0xb4)]}});if(_0x656e46>0x0){const _0x5d184e=await Beneficiary['findByPk'](_0x5c6dc0?.[_0x5a6d9d(0xb4)]);return{'status':httpStatus['OK'],'message':'Beneficiary\x20updated','data':{'receiver_id':_0x5d184e['id'],..._0x5d184e[_0x5a6d9d(0xac)]()}};}else return{'status':httpStatus[_0x5a6d9d(0xc7)],'message':_0x5a6d9d(0xc3)};}catch(_0x1a0d01){return console[_0x5a6d9d(0xd1)](_0x5a6d9d(0xa6),_0x1a0d01),{'status':httpStatus['INTERNAL_SERVER_ERROR'],'message':_0x5a6d9d(0xa6)+_0x1a0d01[_0x5a6d9d(0xbd)]};}};async function verifyBeneficiary(_0x8cfd4c){const _0x4dfb73=a6_0x5a78a6;try{const _0x380d20=await Beneficiary['findByPk'](_0x8cfd4c);if(!_0x380d20)return{'status':0x194,'message':_0x4dfb73(0xbb)};return _0x380d20[_0x4dfb73(0xc8)]='verified',await _0x380d20[_0x4dfb73(0x9e)](),{'status':0xc8,'message':_0x4dfb73(0xb3),'data':_0x380d20};}catch(_0x403e87){return console[_0x4dfb73(0xd1)](_0x4dfb73(0xbf),_0x403e87),{'status':0x1f4,'message':_0x4dfb73(0xce)};}}function a6_0x2427(){const _0x3b652e=['message','log','Error\x20updating\x20beneficiary:','INTERNAL_SERVER_ERROR','active','country_iso_code','Beneficiary\x20not\x20found\x20or\x20data\x20unchanged','58251tNNloG','32nTaCdT','update','NOT_FOUND','verification','payer','pending','2198791qGNvMc','10JLpHpo','receiver','Internal\x20server\x20error','super_merchant_id','sub_merchant_id','error','findOrCreate','save','beneficiary','findOne','496758DYoOwb','registered_name','exports','ðŸš€\x20~\x20deleteReceiverById\x20~\x20affectedRows:','iban','Error\x20finding\x20or\x20updating\x20beneficiary:','genSaltSync','Receiver\x20deleted\x20successfully','../models','6uLfkhD','1890152irvTgK','toJSON','ðŸš€\x20~\x20deleteReceiverById\x20~\x20id:','findAll','password','72SIIfAF','Error\x20finding\x20or\x20creating\x20beneficiary:','address','Beneficiary\x20verification\x20updated\x20to\x20verified','receiver_id','343080IZlxeU','1262889aqgUQa','306940GOiKND','Beneficiary\x20created','city','Beneficiary\x20already\x20added','Beneficiary\x20not\x20found','Receiver\x20not\x20found'];a6_0x2427=function(){return _0x3b652e;};return a6_0x2427();}const addNewPayer=async _0x5e55f0=>{const _0x6dd5e2=a6_0x5a78a6,{first_name:_0x15e081,last_name:_0x46a6c9,service_id:_0x881a8c,service_name:_0x445411,active:_0x43e678}=_0x5e55f0,_0x5e206a={'first_name':_0x15e081,'last_name':_0x46a6c9,'service_id':_0x881a8c,'service_name':_0x445411,'active':0x1},[_0x5cbd55,_0x3af508]=await Payer[_0x6dd5e2(0x9d)]({'where':{'Payer':user['email']},'defaults':user});if(_0x3af508)return _0x5cbd55;return null;},getAllUsers=async(_0x5a4d5f,_0x228fa7)=>{const _0x254ac1=a6_0x5a78a6,_0x5e228f=await User[_0x254ac1(0xae)]();return _0x5e228f;},getUserByEmail=async _0x4d45bc=>{const _0x2b0ceb=a6_0x5a78a6;return User[_0x2b0ceb(0xa0)]({'where':{'email':_0x4d45bc}});},updateUserById=async(_0x17e001,_0x258b87)=>{const _0x480338=a6_0x5a78a6,{firstname:_0x4e6925,lastname:_0x17be73,username:_0x1ad0a1,email:_0x2e4912,password:_0x1cfa0c,active:_0x4cd20c}=_0x258b87,_0x38e399={'firstname':_0x4e6925,'lastname':_0x17be73,'username':_0x1ad0a1,'email':_0x2e4912,'active':_0x4cd20c};if(_0x1cfa0c){const _0x18fe59=bcrypt[_0x480338(0xa7)](0xa),_0xb146c0=bcrypt['hashSync'](_0x1cfa0c,_0x18fe59);_0x38e399[_0x480338(0xaf)]=_0xb146c0;}const _0x367a6e=await User[_0x480338(0xc6)](_0x38e399,{'where':{'id':_0x17e001}});return _0x367a6e;},deleteReceiverById=async _0x46a2a3=>{const _0x3d5978=a6_0x5a78a6;console[_0x3d5978(0xbe)](_0x3d5978(0xad),_0x46a2a3);const [_0xb0b901]=await Receiver[_0x3d5978(0xc6)]({'deleted':0x1},{'where':{'id':_0x46a2a3},'individualHooks':!![]});console[_0x3d5978(0xbe)](_0x3d5978(0xa4),_0xb0b901);if(_0xb0b901===0x0)return{'status':0x194,'message':_0x3d5978(0xbc)};const _0x3f3788=await Receiver[_0x3d5978(0xa0)]({'where':{'id':_0x46a2a3}});return{'status':0xc8,'message':_0x3d5978(0xa8),'data':_0x3f3788[_0x3d5978(0xac)]()};},deleteUserById=async _0x27214f=>{const _0x4d30ed=await getUserById(_0x27214f);if(!_0x4d30ed)return null;return await _0x4d30ed['destroy'](),_0x4d30ed;};module[a6_0x5a78a6(0xa3)]={'addNewSenderReceiver':addNewSenderReceiver,'update_receiver':update_receiver,'verifyBeneficiary':verifyBeneficiary,'getBeneficiaryById':getBeneficiaryById,'deleteReceiverById':deleteReceiverById,'addNewPayer':addNewPayer,'getAllUsers':getAllUsers,'getUserByEmail':getUserByEmail,'updateUserById':updateUserById,'deleteUserById':deleteUserById};